/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 * @generated-id: 2210320217d6
 */

import * as z from "zod";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

/**
 * The transport type used to connect to the MCP server
 */
export const TransportType = {
  StreamableHttp: "streamable-http",
  Sse: "sse",
} as const;
/**
 * The transport type used to connect to the MCP server
 */
export type TransportType = ClosedEnum<typeof TransportType>;

/**
 * A proxy tool that references an external MCP server
 */
export type ExternalMCPToolDefinition = {
  /**
   * When the tool definition was created.
   */
  createdAt: Date;
  /**
   * The ID of the deployments_external_mcps record
   */
  deploymentExternalMcpId: string;
  /**
   * The ID of the deployment
   */
  deploymentId: string;
  /**
   * The ID of the tool definition
   */
  id: string;
  /**
   * The reverse-DNS name of the external MCP server (e.g., ai.exa/exa)
   */
  name: string;
  /**
   * The OAuth authorization endpoint URL
   */
  oauthAuthorizationEndpoint?: string | undefined;
  /**
   * The OAuth dynamic client registration endpoint URL
   */
  oauthRegistrationEndpoint?: string | undefined;
  /**
   * The OAuth scopes supported by the server
   */
  oauthScopesSupported?: Array<string> | undefined;
  /**
   * The OAuth token endpoint URL
   */
  oauthTokenEndpoint?: string | undefined;
  /**
   * OAuth version: '2.1' (MCP OAuth), '2.0' (legacy), or 'none'
   */
  oauthVersion: string;
  /**
   * The ID of the MCP registry
   */
  registryId: string;
  /**
   * The URL to connect to the MCP server
   */
  remoteUrl: string;
  /**
   * Whether the external MCP server requires OAuth authentication
   */
  requiresOauth: boolean;
  /**
   * The slug used for tool prefixing (e.g., github)
   */
  slug: string;
  /**
   * The URN of this tool (tools:externalmcp:<slug>:proxy)
   */
  toolUrn: string;
  /**
   * The transport type used to connect to the MCP server
   */
  transportType: TransportType;
  /**
   * When the tool definition was last updated.
   */
  updatedAt: Date;
};

/** @internal */
export const TransportType$inboundSchema: z.ZodNativeEnum<
  typeof TransportType
> = z.nativeEnum(TransportType);

/** @internal */
export const ExternalMCPToolDefinition$inboundSchema: z.ZodType<
  ExternalMCPToolDefinition,
  z.ZodTypeDef,
  unknown
> = z.object({
  created_at: z.string().datetime({ offset: true }).transform(v => new Date(v)),
  deployment_external_mcp_id: z.string(),
  deployment_id: z.string(),
  id: z.string(),
  name: z.string(),
  oauth_authorization_endpoint: z.string().optional(),
  oauth_registration_endpoint: z.string().optional(),
  oauth_scopes_supported: z.array(z.string()).optional(),
  oauth_token_endpoint: z.string().optional(),
  oauth_version: z.string(),
  registry_id: z.string(),
  remote_url: z.string(),
  requires_oauth: z.boolean(),
  slug: z.string(),
  tool_urn: z.string(),
  transport_type: TransportType$inboundSchema,
  updated_at: z.string().datetime({ offset: true }).transform(v => new Date(v)),
}).transform((v) => {
  return remap$(v, {
    "created_at": "createdAt",
    "deployment_external_mcp_id": "deploymentExternalMcpId",
    "deployment_id": "deploymentId",
    "oauth_authorization_endpoint": "oauthAuthorizationEndpoint",
    "oauth_registration_endpoint": "oauthRegistrationEndpoint",
    "oauth_scopes_supported": "oauthScopesSupported",
    "oauth_token_endpoint": "oauthTokenEndpoint",
    "oauth_version": "oauthVersion",
    "registry_id": "registryId",
    "remote_url": "remoteUrl",
    "requires_oauth": "requiresOauth",
    "tool_urn": "toolUrn",
    "transport_type": "transportType",
    "updated_at": "updatedAt",
  });
});

/** @internal */
export type ExternalMCPToolDefinition$Outbound = {
  created_at: string;
  deployment_external_mcp_id: string;
  deployment_id: string;
  id: string;
  name: string;
  oauth_authorization_endpoint?: string | undefined;
  oauth_registration_endpoint?: string | undefined;
  oauth_scopes_supported?: Array<string> | undefined;
  oauth_token_endpoint?: string | undefined;
  oauth_version: string;
  registry_id: string;
  remote_url: string;
  requires_oauth: boolean;
  slug: string;
  tool_urn: string;
  updated_at: string;
};

/** @internal */
export const ExternalMCPToolDefinition$outboundSchema: z.ZodType<
  ExternalMCPToolDefinition$Outbound,
  z.ZodTypeDef,
  ExternalMCPToolDefinition
> = z.object({
  createdAt: z.date().transform(v => v.toISOString()),
  deploymentExternalMcpId: z.string(),
  deploymentId: z.string(),
  id: z.string(),
  name: z.string(),
  oauthAuthorizationEndpoint: z.string().optional(),
  oauthRegistrationEndpoint: z.string().optional(),
  oauthScopesSupported: z.array(z.string()).optional(),
  oauthTokenEndpoint: z.string().optional(),
  oauthVersion: z.string(),
  registryId: z.string(),
  remoteUrl: z.string(),
  requiresOauth: z.boolean(),
  slug: z.string(),
  toolUrn: z.string(),
  updatedAt: z.date().transform(v => v.toISOString()),
}).transform((v) => {
  return remap$(v, {
    createdAt: "created_at",
    deploymentExternalMcpId: "deployment_external_mcp_id",
    deploymentId: "deployment_id",
    oauthAuthorizationEndpoint: "oauth_authorization_endpoint",
    oauthRegistrationEndpoint: "oauth_registration_endpoint",
    oauthScopesSupported: "oauth_scopes_supported",
    oauthTokenEndpoint: "oauth_token_endpoint",
    oauthVersion: "oauth_version",
    registryId: "registry_id",
    remoteUrl: "remote_url",
    requiresOauth: "requires_oauth",
    toolUrn: "tool_urn",
    updatedAt: "updated_at",
  });
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace ExternalMCPToolDefinition$ {
  /** @deprecated use `ExternalMCPToolDefinition$inboundSchema` instead. */
  export const inboundSchema = ExternalMCPToolDefinition$inboundSchema;
  /** @deprecated use `ExternalMCPToolDefinition$outboundSchema` instead. */
  export const outboundSchema = ExternalMCPToolDefinition$outboundSchema;
  /** @deprecated use `ExternalMCPToolDefinition$Outbound` instead. */
  export type Outbound = ExternalMCPToolDefinition$Outbound;
}

export function externalMCPToolDefinitionToJSON(
  externalMCPToolDefinition: ExternalMCPToolDefinition,
): string {
  return JSON.stringify(
    ExternalMCPToolDefinition$outboundSchema.parse(externalMCPToolDefinition),
  );
}

export function externalMCPToolDefinitionFromJSON(
  jsonString: string,
): SafeParseResult<ExternalMCPToolDefinition, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ExternalMCPToolDefinition$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ExternalMCPToolDefinition' from JSON`,
  );
}
