contents:
  repositories:
    - './packages'
    - https://dl-cdn.alpinelinux.org/alpine/v3.22/main
  packages:
    - alpine-baselayout-data
    - ca-certificates
    - su-exec
    - nodejs=22.16.0-r2
    - gram-runner

cmd: gram-runner -language javascript
entrypoint:
  shell-fragment: |
    set -e
    gram-runner -init -language javascript
    exec su-exec gram "$0" "$@"

accounts:
  # The actual container will be run as gram. This just allows an init process
  # to prepare the filesystem.
  run-as: root
  groups:
    - groupname: gram
      gid: 10000
  users:
    - username: gram
      uid: 10000
      gid: 10000

work-dir: /var/task

paths:
  - path: /data
    type: directory
    permissions: 0o755
  - path: /var/task
    type: directory
    permissions: 0o755

environment:
  RUNNER_LANGUAGE: javascript
  PATH: /usr/local/sbin:/usr/local/bin:/usr/bin:/usr/sbin:/sbin:/bin
