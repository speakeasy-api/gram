/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 * @generated-id: 142ca5e9e8c4
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";
import {
  ExternalMCPToolDefinition,
  ExternalMCPToolDefinition$inboundSchema,
} from "./externalmcptooldefinition.js";
import {
  FunctionToolDefinition,
  FunctionToolDefinition$inboundSchema,
} from "./functiontooldefinition.js";
import {
  HTTPToolDefinition,
  HTTPToolDefinition$inboundSchema,
} from "./httptooldefinition.js";
import {
  PromptTemplate,
  PromptTemplate$inboundSchema,
} from "./prompttemplate.js";

/**
 * A polymorphic tool - can be an HTTP tool, function tool, prompt template, or external MCP proxy
 */
export type Tool = {
  /**
   * A proxy tool that references an external MCP server
   */
  externalMcpToolDefinition?: ExternalMCPToolDefinition | undefined;
  /**
   * A function tool
   */
  functionToolDefinition?: FunctionToolDefinition | undefined;
  /**
   * An HTTP tool
   */
  httpToolDefinition?: HTTPToolDefinition | undefined;
  /**
   * A prompt template
   */
  promptTemplate?: PromptTemplate | undefined;
};

/** @internal */
export const Tool$inboundSchema: z.ZodType<Tool, z.ZodTypeDef, unknown> = z
  .object({
    external_mcp_tool_definition: ExternalMCPToolDefinition$inboundSchema
      .optional(),
    function_tool_definition: FunctionToolDefinition$inboundSchema.optional(),
    http_tool_definition: HTTPToolDefinition$inboundSchema.optional(),
    prompt_template: PromptTemplate$inboundSchema.optional(),
  }).transform((v) => {
    return remap$(v, {
      "external_mcp_tool_definition": "externalMcpToolDefinition",
      "function_tool_definition": "functionToolDefinition",
      "http_tool_definition": "httpToolDefinition",
      "prompt_template": "promptTemplate",
    });
  });

export function toolFromJSON(
  jsonString: string,
): SafeParseResult<Tool, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Tool$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Tool' from JSON`,
  );
}
