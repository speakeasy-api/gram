// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/speakeasy-api/gram/responses/internal/utils"
	"github.com/speakeasy-api/gram/responses/optionalnullable"
)

// FunctionCallOutputItemParamType - The type of the function tool call output. Always `function_call_output`.
type FunctionCallOutputItemParamType string

const (
	FunctionCallOutputItemParamTypeFunctionCallOutput FunctionCallOutputItemParamType = "function_call_output"
)

func (e FunctionCallOutputItemParamType) ToPointer() *FunctionCallOutputItemParamType {
	return &e
}
func (e *FunctionCallOutputItemParamType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "function_call_output":
		*e = FunctionCallOutputItemParamType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for FunctionCallOutputItemParamType: %v", v)
	}
}

type FunctionCallOutputItemParamOutput1Type string

const (
	FunctionCallOutputItemParamOutput1TypeInputTextContentParam           FunctionCallOutputItemParamOutput1Type = "InputTextContentParam"
	FunctionCallOutputItemParamOutput1TypeInputImageContentParamAutoParam FunctionCallOutputItemParamOutput1Type = "InputImageContentParamAutoParam"
	FunctionCallOutputItemParamOutput1TypeInputFileContentParam           FunctionCallOutputItemParamOutput1Type = "InputFileContentParam"
	FunctionCallOutputItemParamOutput1TypeInputVideoContent               FunctionCallOutputItemParamOutput1Type = "InputVideoContent"
)

// FunctionCallOutputItemParamOutput1 - A piece of message content, such as text, an image, or a file.
type FunctionCallOutputItemParamOutput1 struct {
	InputTextContentParam           *InputTextContentParam           `queryParam:"inline" union:"member"`
	InputImageContentParamAutoParam *InputImageContentParamAutoParam `queryParam:"inline" union:"member"`
	InputFileContentParam           *InputFileContentParam           `queryParam:"inline" union:"member"`
	InputVideoContent               *InputVideoContent               `queryParam:"inline" union:"member"`

	Type FunctionCallOutputItemParamOutput1Type
}

func CreateFunctionCallOutputItemParamOutput1InputTextContentParam(inputTextContentParam InputTextContentParam) FunctionCallOutputItemParamOutput1 {
	typ := FunctionCallOutputItemParamOutput1TypeInputTextContentParam

	return FunctionCallOutputItemParamOutput1{
		InputTextContentParam: &inputTextContentParam,
		Type:                  typ,
	}
}

func CreateFunctionCallOutputItemParamOutput1InputImageContentParamAutoParam(inputImageContentParamAutoParam InputImageContentParamAutoParam) FunctionCallOutputItemParamOutput1 {
	typ := FunctionCallOutputItemParamOutput1TypeInputImageContentParamAutoParam

	return FunctionCallOutputItemParamOutput1{
		InputImageContentParamAutoParam: &inputImageContentParamAutoParam,
		Type:                            typ,
	}
}

func CreateFunctionCallOutputItemParamOutput1InputFileContentParam(inputFileContentParam InputFileContentParam) FunctionCallOutputItemParamOutput1 {
	typ := FunctionCallOutputItemParamOutput1TypeInputFileContentParam

	return FunctionCallOutputItemParamOutput1{
		InputFileContentParam: &inputFileContentParam,
		Type:                  typ,
	}
}

func CreateFunctionCallOutputItemParamOutput1InputVideoContent(inputVideoContent InputVideoContent) FunctionCallOutputItemParamOutput1 {
	typ := FunctionCallOutputItemParamOutput1TypeInputVideoContent

	return FunctionCallOutputItemParamOutput1{
		InputVideoContent: &inputVideoContent,
		Type:              typ,
	}
}

func (u *FunctionCallOutputItemParamOutput1) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var inputTextContentParam InputTextContentParam = InputTextContentParam{}
	if err := utils.UnmarshalJSON(data, &inputTextContentParam, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  FunctionCallOutputItemParamOutput1TypeInputTextContentParam,
			Value: &inputTextContentParam,
		})
	}

	var inputImageContentParamAutoParam InputImageContentParamAutoParam = InputImageContentParamAutoParam{}
	if err := utils.UnmarshalJSON(data, &inputImageContentParamAutoParam, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  FunctionCallOutputItemParamOutput1TypeInputImageContentParamAutoParam,
			Value: &inputImageContentParamAutoParam,
		})
	}

	var inputFileContentParam InputFileContentParam = InputFileContentParam{}
	if err := utils.UnmarshalJSON(data, &inputFileContentParam, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  FunctionCallOutputItemParamOutput1TypeInputFileContentParam,
			Value: &inputFileContentParam,
		})
	}

	var inputVideoContent InputVideoContent = InputVideoContent{}
	if err := utils.UnmarshalJSON(data, &inputVideoContent, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  FunctionCallOutputItemParamOutput1TypeInputVideoContent,
			Value: &inputVideoContent,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for FunctionCallOutputItemParamOutput1", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for FunctionCallOutputItemParamOutput1", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(FunctionCallOutputItemParamOutput1Type)
	switch best.Type {
	case FunctionCallOutputItemParamOutput1TypeInputTextContentParam:
		u.InputTextContentParam = best.Value.(*InputTextContentParam)
		return nil
	case FunctionCallOutputItemParamOutput1TypeInputImageContentParamAutoParam:
		u.InputImageContentParamAutoParam = best.Value.(*InputImageContentParamAutoParam)
		return nil
	case FunctionCallOutputItemParamOutput1TypeInputFileContentParam:
		u.InputFileContentParam = best.Value.(*InputFileContentParam)
		return nil
	case FunctionCallOutputItemParamOutput1TypeInputVideoContent:
		u.InputVideoContent = best.Value.(*InputVideoContent)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for FunctionCallOutputItemParamOutput1", string(data))
}

func (u FunctionCallOutputItemParamOutput1) MarshalJSON() ([]byte, error) {
	if u.InputTextContentParam != nil {
		return utils.MarshalJSON(u.InputTextContentParam, "", true)
	}

	if u.InputImageContentParamAutoParam != nil {
		return utils.MarshalJSON(u.InputImageContentParamAutoParam, "", true)
	}

	if u.InputFileContentParam != nil {
		return utils.MarshalJSON(u.InputFileContentParam, "", true)
	}

	if u.InputVideoContent != nil {
		return utils.MarshalJSON(u.InputVideoContent, "", true)
	}

	return nil, errors.New("could not marshal union type FunctionCallOutputItemParamOutput1: all fields are null")
}

type FunctionCallOutputItemParamOutput2Type string

const (
	FunctionCallOutputItemParamOutput2TypeStr                                       FunctionCallOutputItemParamOutput2Type = "str"
	FunctionCallOutputItemParamOutput2TypeArrayOfFunctionCallOutputItemParamOutput1 FunctionCallOutputItemParamOutput2Type = "arrayOfFunctionCallOutputItemParamOutput1"
)

// FunctionCallOutputItemParamOutput2 - Text, image, or file output of the function tool call.
type FunctionCallOutputItemParamOutput2 struct {
	Str                                       *string                              `queryParam:"inline" union:"member"`
	ArrayOfFunctionCallOutputItemParamOutput1 []FunctionCallOutputItemParamOutput1 `queryParam:"inline" union:"member"`

	Type FunctionCallOutputItemParamOutput2Type
}

func CreateFunctionCallOutputItemParamOutput2Str(str string) FunctionCallOutputItemParamOutput2 {
	typ := FunctionCallOutputItemParamOutput2TypeStr

	return FunctionCallOutputItemParamOutput2{
		Str:  &str,
		Type: typ,
	}
}

func CreateFunctionCallOutputItemParamOutput2ArrayOfFunctionCallOutputItemParamOutput1(arrayOfFunctionCallOutputItemParamOutput1 []FunctionCallOutputItemParamOutput1) FunctionCallOutputItemParamOutput2 {
	typ := FunctionCallOutputItemParamOutput2TypeArrayOfFunctionCallOutputItemParamOutput1

	return FunctionCallOutputItemParamOutput2{
		ArrayOfFunctionCallOutputItemParamOutput1: arrayOfFunctionCallOutputItemParamOutput1,
		Type: typ,
	}
}

func (u *FunctionCallOutputItemParamOutput2) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var str string = ""
	if err := utils.UnmarshalJSON(data, &str, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  FunctionCallOutputItemParamOutput2TypeStr,
			Value: &str,
		})
	}

	var arrayOfFunctionCallOutputItemParamOutput1 []FunctionCallOutputItemParamOutput1 = []FunctionCallOutputItemParamOutput1{}
	if err := utils.UnmarshalJSON(data, &arrayOfFunctionCallOutputItemParamOutput1, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  FunctionCallOutputItemParamOutput2TypeArrayOfFunctionCallOutputItemParamOutput1,
			Value: arrayOfFunctionCallOutputItemParamOutput1,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for FunctionCallOutputItemParamOutput2", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for FunctionCallOutputItemParamOutput2", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(FunctionCallOutputItemParamOutput2Type)
	switch best.Type {
	case FunctionCallOutputItemParamOutput2TypeStr:
		u.Str = best.Value.(*string)
		return nil
	case FunctionCallOutputItemParamOutput2TypeArrayOfFunctionCallOutputItemParamOutput1:
		u.ArrayOfFunctionCallOutputItemParamOutput1 = best.Value.([]FunctionCallOutputItemParamOutput1)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for FunctionCallOutputItemParamOutput2", string(data))
}

func (u FunctionCallOutputItemParamOutput2) MarshalJSON() ([]byte, error) {
	if u.Str != nil {
		return utils.MarshalJSON(u.Str, "", true)
	}

	if u.ArrayOfFunctionCallOutputItemParamOutput1 != nil {
		return utils.MarshalJSON(u.ArrayOfFunctionCallOutputItemParamOutput1, "", true)
	}

	return nil, errors.New("could not marshal union type FunctionCallOutputItemParamOutput2: all fields are null")
}

// FunctionCallOutputItemParam - The output of a function tool call.
type FunctionCallOutputItemParam struct {
	ID optionalnullable.OptionalNullable[string] `json:"id,omitzero"`
	// The unique ID of the function tool call generated by the model.
	CallID string `json:"call_id"`
	// The type of the function tool call output. Always `function_call_output`.
	Type *FunctionCallOutputItemParamType `default:"function_call_output" json:"type"`
	// Text, image, or file output of the function tool call.
	Output FunctionCallOutputItemParamOutput2                    `json:"output"`
	Status optionalnullable.OptionalNullable[FunctionCallStatus] `json:"status,omitzero"`
}

func (f FunctionCallOutputItemParam) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(f, "", false)
}

func (f *FunctionCallOutputItemParam) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &f, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (f *FunctionCallOutputItemParam) GetID() optionalnullable.OptionalNullable[string] {
	if f == nil {
		return nil
	}
	return f.ID
}

func (f *FunctionCallOutputItemParam) GetCallID() string {
	if f == nil {
		return ""
	}
	return f.CallID
}

func (f *FunctionCallOutputItemParam) GetType() *FunctionCallOutputItemParamType {
	if f == nil {
		return nil
	}
	return f.Type
}

func (f *FunctionCallOutputItemParam) GetOutput() FunctionCallOutputItemParamOutput2 {
	if f == nil {
		return FunctionCallOutputItemParamOutput2{}
	}
	return f.Output
}

func (f *FunctionCallOutputItemParam) GetStatus() optionalnullable.OptionalNullable[FunctionCallStatus] {
	if f == nil {
		return nil
	}
	return f.Status
}
