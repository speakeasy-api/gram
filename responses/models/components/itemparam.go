// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/speakeasy-api/gram/responses/internal/utils"
)

type ItemParamType string

const (
	ItemParamTypeItemReferenceParam          ItemParamType = "ItemReferenceParam"
	ItemParamTypeReasoningItemParam          ItemParamType = "ReasoningItemParam"
	ItemParamTypeUserMessageItemParam        ItemParamType = "UserMessageItemParam"
	ItemParamTypeSystemMessageItemParam      ItemParamType = "SystemMessageItemParam"
	ItemParamTypeDeveloperMessageItemParam   ItemParamType = "DeveloperMessageItemParam"
	ItemParamTypeAssistantMessageItemParam   ItemParamType = "AssistantMessageItemParam"
	ItemParamTypeFunctionCallItemParam       ItemParamType = "FunctionCallItemParam"
	ItemParamTypeFunctionCallOutputItemParam ItemParamType = "FunctionCallOutputItemParam"
)

type ItemParam struct {
	ItemReferenceParam          *ItemReferenceParam          `queryParam:"inline" union:"member"`
	ReasoningItemParam          *ReasoningItemParam          `queryParam:"inline" union:"member"`
	UserMessageItemParam        *UserMessageItemParam        `queryParam:"inline" union:"member"`
	SystemMessageItemParam      *SystemMessageItemParam      `queryParam:"inline" union:"member"`
	DeveloperMessageItemParam   *DeveloperMessageItemParam   `queryParam:"inline" union:"member"`
	AssistantMessageItemParam   *AssistantMessageItemParam   `queryParam:"inline" union:"member"`
	FunctionCallItemParam       *FunctionCallItemParam       `queryParam:"inline" union:"member"`
	FunctionCallOutputItemParam *FunctionCallOutputItemParam `queryParam:"inline" union:"member"`

	Type ItemParamType
}

func CreateItemParamItemReferenceParam(itemReferenceParam ItemReferenceParam) ItemParam {
	typ := ItemParamTypeItemReferenceParam

	return ItemParam{
		ItemReferenceParam: &itemReferenceParam,
		Type:               typ,
	}
}

func CreateItemParamReasoningItemParam(reasoningItemParam ReasoningItemParam) ItemParam {
	typ := ItemParamTypeReasoningItemParam

	return ItemParam{
		ReasoningItemParam: &reasoningItemParam,
		Type:               typ,
	}
}

func CreateItemParamUserMessageItemParam(userMessageItemParam UserMessageItemParam) ItemParam {
	typ := ItemParamTypeUserMessageItemParam

	return ItemParam{
		UserMessageItemParam: &userMessageItemParam,
		Type:                 typ,
	}
}

func CreateItemParamSystemMessageItemParam(systemMessageItemParam SystemMessageItemParam) ItemParam {
	typ := ItemParamTypeSystemMessageItemParam

	return ItemParam{
		SystemMessageItemParam: &systemMessageItemParam,
		Type:                   typ,
	}
}

func CreateItemParamDeveloperMessageItemParam(developerMessageItemParam DeveloperMessageItemParam) ItemParam {
	typ := ItemParamTypeDeveloperMessageItemParam

	return ItemParam{
		DeveloperMessageItemParam: &developerMessageItemParam,
		Type:                      typ,
	}
}

func CreateItemParamAssistantMessageItemParam(assistantMessageItemParam AssistantMessageItemParam) ItemParam {
	typ := ItemParamTypeAssistantMessageItemParam

	return ItemParam{
		AssistantMessageItemParam: &assistantMessageItemParam,
		Type:                      typ,
	}
}

func CreateItemParamFunctionCallItemParam(functionCallItemParam FunctionCallItemParam) ItemParam {
	typ := ItemParamTypeFunctionCallItemParam

	return ItemParam{
		FunctionCallItemParam: &functionCallItemParam,
		Type:                  typ,
	}
}

func CreateItemParamFunctionCallOutputItemParam(functionCallOutputItemParam FunctionCallOutputItemParam) ItemParam {
	typ := ItemParamTypeFunctionCallOutputItemParam

	return ItemParam{
		FunctionCallOutputItemParam: &functionCallOutputItemParam,
		Type:                        typ,
	}
}

func (u *ItemParam) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var itemReferenceParam ItemReferenceParam = ItemReferenceParam{}
	if err := utils.UnmarshalJSON(data, &itemReferenceParam, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  ItemParamTypeItemReferenceParam,
			Value: &itemReferenceParam,
		})
	}

	var reasoningItemParam ReasoningItemParam = ReasoningItemParam{}
	if err := utils.UnmarshalJSON(data, &reasoningItemParam, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  ItemParamTypeReasoningItemParam,
			Value: &reasoningItemParam,
		})
	}

	var userMessageItemParam UserMessageItemParam = UserMessageItemParam{}
	if err := utils.UnmarshalJSON(data, &userMessageItemParam, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  ItemParamTypeUserMessageItemParam,
			Value: &userMessageItemParam,
		})
	}

	var systemMessageItemParam SystemMessageItemParam = SystemMessageItemParam{}
	if err := utils.UnmarshalJSON(data, &systemMessageItemParam, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  ItemParamTypeSystemMessageItemParam,
			Value: &systemMessageItemParam,
		})
	}

	var developerMessageItemParam DeveloperMessageItemParam = DeveloperMessageItemParam{}
	if err := utils.UnmarshalJSON(data, &developerMessageItemParam, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  ItemParamTypeDeveloperMessageItemParam,
			Value: &developerMessageItemParam,
		})
	}

	var assistantMessageItemParam AssistantMessageItemParam = AssistantMessageItemParam{}
	if err := utils.UnmarshalJSON(data, &assistantMessageItemParam, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  ItemParamTypeAssistantMessageItemParam,
			Value: &assistantMessageItemParam,
		})
	}

	var functionCallItemParam FunctionCallItemParam = FunctionCallItemParam{}
	if err := utils.UnmarshalJSON(data, &functionCallItemParam, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  ItemParamTypeFunctionCallItemParam,
			Value: &functionCallItemParam,
		})
	}

	var functionCallOutputItemParam FunctionCallOutputItemParam = FunctionCallOutputItemParam{}
	if err := utils.UnmarshalJSON(data, &functionCallOutputItemParam, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  ItemParamTypeFunctionCallOutputItemParam,
			Value: &functionCallOutputItemParam,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for ItemParam", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for ItemParam", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(ItemParamType)
	switch best.Type {
	case ItemParamTypeItemReferenceParam:
		u.ItemReferenceParam = best.Value.(*ItemReferenceParam)
		return nil
	case ItemParamTypeReasoningItemParam:
		u.ReasoningItemParam = best.Value.(*ReasoningItemParam)
		return nil
	case ItemParamTypeUserMessageItemParam:
		u.UserMessageItemParam = best.Value.(*UserMessageItemParam)
		return nil
	case ItemParamTypeSystemMessageItemParam:
		u.SystemMessageItemParam = best.Value.(*SystemMessageItemParam)
		return nil
	case ItemParamTypeDeveloperMessageItemParam:
		u.DeveloperMessageItemParam = best.Value.(*DeveloperMessageItemParam)
		return nil
	case ItemParamTypeAssistantMessageItemParam:
		u.AssistantMessageItemParam = best.Value.(*AssistantMessageItemParam)
		return nil
	case ItemParamTypeFunctionCallItemParam:
		u.FunctionCallItemParam = best.Value.(*FunctionCallItemParam)
		return nil
	case ItemParamTypeFunctionCallOutputItemParam:
		u.FunctionCallOutputItemParam = best.Value.(*FunctionCallOutputItemParam)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for ItemParam", string(data))
}

func (u ItemParam) MarshalJSON() ([]byte, error) {
	if u.ItemReferenceParam != nil {
		return utils.MarshalJSON(u.ItemReferenceParam, "", true)
	}

	if u.ReasoningItemParam != nil {
		return utils.MarshalJSON(u.ReasoningItemParam, "", true)
	}

	if u.UserMessageItemParam != nil {
		return utils.MarshalJSON(u.UserMessageItemParam, "", true)
	}

	if u.SystemMessageItemParam != nil {
		return utils.MarshalJSON(u.SystemMessageItemParam, "", true)
	}

	if u.DeveloperMessageItemParam != nil {
		return utils.MarshalJSON(u.DeveloperMessageItemParam, "", true)
	}

	if u.AssistantMessageItemParam != nil {
		return utils.MarshalJSON(u.AssistantMessageItemParam, "", true)
	}

	if u.FunctionCallItemParam != nil {
		return utils.MarshalJSON(u.FunctionCallItemParam, "", true)
	}

	if u.FunctionCallOutputItemParam != nil {
		return utils.MarshalJSON(u.FunctionCallOutputItemParam, "", true)
	}

	return nil, errors.New("could not marshal union type ItemParam: all fields are null")
}
