// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: queries.sql

package repo

import (
	"context"
)

const deleteFeature = `-- name: DeleteFeature :one
UPDATE organization_features
SET deleted_at = clock_timestamp(),
    updated_at = clock_timestamp()
WHERE organization_id = $1
  AND feature_name = $2
  AND deleted IS FALSE
RETURNING id, organization_id, feature_name, created_at, updated_at, deleted_at, deleted
`

type DeleteFeatureParams struct {
	OrganizationID string
	FeatureName    string
}

func (q *Queries) DeleteFeature(ctx context.Context, arg DeleteFeatureParams) (OrganizationFeature, error) {
	row := q.db.QueryRow(ctx, deleteFeature, arg.OrganizationID, arg.FeatureName)
	var i OrganizationFeature
	err := row.Scan(
		&i.ID,
		&i.OrganizationID,
		&i.FeatureName,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
		&i.Deleted,
	)
	return i, err
}

const enableFeature = `-- name: EnableFeature :one
INSERT INTO organization_features (
    organization_id,
    feature_name
) VALUES (
    $1,
    $2
)
RETURNING id, organization_id, feature_name, created_at, updated_at, deleted_at, deleted
`

type EnableFeatureParams struct {
	OrganizationID string
	FeatureName    string
}

func (q *Queries) EnableFeature(ctx context.Context, arg EnableFeatureParams) (OrganizationFeature, error) {
	row := q.db.QueryRow(ctx, enableFeature, arg.OrganizationID, arg.FeatureName)
	var i OrganizationFeature
	err := row.Scan(
		&i.ID,
		&i.OrganizationID,
		&i.FeatureName,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
		&i.Deleted,
	)
	return i, err
}

const isFeatureEnabled = `-- name: IsFeatureEnabled :one
SELECT EXISTS (
        SELECT 1
        FROM organization_features
        WHERE organization_id = $1
            AND feature_name = $2
            AND deleted IS FALSE
) AS enabled
`

type IsFeatureEnabledParams struct {
	OrganizationID string
	FeatureName    string
}

func (q *Queries) IsFeatureEnabled(ctx context.Context, arg IsFeatureEnabledParams) (bool, error) {
	row := q.db.QueryRow(ctx, isFeatureEnabled, arg.OrganizationID, arg.FeatureName)
	var enabled bool
	err := row.Scan(&enabled)
	return enabled, err
}
