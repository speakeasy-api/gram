// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: queries.sql

package repo

import (
	"context"
)

const createOpenRouterAPIKey = `-- name: CreateOpenRouterAPIKey :one
INSERT INTO openrouter_api_keys (
    organization_id
  , key
  , key_hash
  , monthly_credits
) VALUES (
    $1
  , $2
  , $3
  , $4
)
RETURNING organization_id, key, key_hash, monthly_credits, disabled, created_at, updated_at, deleted_at, deleted
`

type CreateOpenRouterAPIKeyParams struct {
	OrganizationID string
	Key            string
	KeyHash        string
	MonthlyCredits int64
}

func (q *Queries) CreateOpenRouterAPIKey(ctx context.Context, arg CreateOpenRouterAPIKeyParams) (OpenrouterApiKey, error) {
	row := q.db.QueryRow(ctx, createOpenRouterAPIKey,
		arg.OrganizationID,
		arg.Key,
		arg.KeyHash,
		arg.MonthlyCredits,
	)
	var i OpenrouterApiKey
	err := row.Scan(
		&i.OrganizationID,
		&i.Key,
		&i.KeyHash,
		&i.MonthlyCredits,
		&i.Disabled,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
		&i.Deleted,
	)
	return i, err
}

const getOpenRouterAPIKey = `-- name: GetOpenRouterAPIKey :one
SELECT organization_id, key, key_hash, monthly_credits, disabled, created_at, updated_at, deleted_at, deleted
FROM openrouter_api_keys
WHERE organization_id = $1
  AND deleted IS FALSE
`

func (q *Queries) GetOpenRouterAPIKey(ctx context.Context, organizationID string) (OpenrouterApiKey, error) {
	row := q.db.QueryRow(ctx, getOpenRouterAPIKey, organizationID)
	var i OpenrouterApiKey
	err := row.Scan(
		&i.OrganizationID,
		&i.Key,
		&i.KeyHash,
		&i.MonthlyCredits,
		&i.Disabled,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
		&i.Deleted,
	)
	return i, err
}

const updateOpenRouterKey = `-- name: UpdateOpenRouterKey :one
UPDATE openrouter_api_keys
SET monthly_credits = $1, key_hash = $2, key = $3
WHERE organization_id = $4
  AND deleted IS FALSE
RETURNING organization_id, key, key_hash, monthly_credits, disabled, created_at, updated_at, deleted_at, deleted
`

type UpdateOpenRouterKeyParams struct {
	MonthlyCredits int64
	KeyHash        string
	Key            string
	OrganizationID string
}

func (q *Queries) UpdateOpenRouterKey(ctx context.Context, arg UpdateOpenRouterKeyParams) (OpenrouterApiKey, error) {
	row := q.db.QueryRow(ctx, updateOpenRouterKey,
		arg.MonthlyCredits,
		arg.KeyHash,
		arg.Key,
		arg.OrganizationID,
	)
	var i OpenrouterApiKey
	err := row.Scan(
		&i.OrganizationID,
		&i.Key,
		&i.KeyHash,
		&i.MonthlyCredits,
		&i.Disabled,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
		&i.Deleted,
	)
	return i, err
}
