-- Create "organization_features" table
CREATE TABLE "organization_features" (
  "id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  "organization_id" text NOT NULL,
  "feature_name" text NOT NULL,
  "created_at" timestamptz NOT NULL DEFAULT clock_timestamp(),
  "updated_at" timestamptz NOT NULL DEFAULT clock_timestamp(),
  "deleted_at" timestamptz NULL,
  "deleted" boolean NOT NULL GENERATED ALWAYS AS (deleted_at IS NOT NULL) STORED,
  PRIMARY KEY ("id"),
  CONSTRAINT "organization_features_feature_name_check" CHECK ((feature_name <> ''::text) AND (char_length(feature_name) <= 60))
);
-- Create index "organization_features_organization_id_feature_name_key" to table: "organization_features"
CREATE UNIQUE INDEX "organization_features_organization_id_feature_name_key" ON "organization_features" ("organization_id", "feature_name") WHERE (deleted IS FALSE);
