// Code generated by goa v3.24.1, DO NOT EDIT.
//
// chat HTTP client CLI support package
//
// Command:
// $ goa gen github.com/speakeasy-api/gram/server/design

package client

import (
	"encoding/json"
	"fmt"

	chat "github.com/speakeasy-api/gram/server/gen/chat"
	goa "goa.design/goa/v3/pkg"
)

// BuildListChatsPayload builds the payload for the chat listChats endpoint
// from CLI flags.
func BuildListChatsPayload(chatListChatsSessionToken string, chatListChatsProjectSlugInput string, chatListChatsChatSessionsToken string) (*chat.ListChatsPayload, error) {
	var sessionToken *string
	{
		if chatListChatsSessionToken != "" {
			sessionToken = &chatListChatsSessionToken
		}
	}
	var projectSlugInput *string
	{
		if chatListChatsProjectSlugInput != "" {
			projectSlugInput = &chatListChatsProjectSlugInput
		}
	}
	var chatSessionsToken *string
	{
		if chatListChatsChatSessionsToken != "" {
			chatSessionsToken = &chatListChatsChatSessionsToken
		}
	}
	v := &chat.ListChatsPayload{}
	v.SessionToken = sessionToken
	v.ProjectSlugInput = projectSlugInput
	v.ChatSessionsToken = chatSessionsToken

	return v, nil
}

// BuildLoadChatPayload builds the payload for the chat loadChat endpoint from
// CLI flags.
func BuildLoadChatPayload(chatLoadChatID string, chatLoadChatSessionToken string, chatLoadChatProjectSlugInput string, chatLoadChatChatSessionsToken string) (*chat.LoadChatPayload, error) {
	var id string
	{
		id = chatLoadChatID
	}
	var sessionToken *string
	{
		if chatLoadChatSessionToken != "" {
			sessionToken = &chatLoadChatSessionToken
		}
	}
	var projectSlugInput *string
	{
		if chatLoadChatProjectSlugInput != "" {
			projectSlugInput = &chatLoadChatProjectSlugInput
		}
	}
	var chatSessionsToken *string
	{
		if chatLoadChatChatSessionsToken != "" {
			chatSessionsToken = &chatLoadChatChatSessionsToken
		}
	}
	v := &chat.LoadChatPayload{}
	v.ID = id
	v.SessionToken = sessionToken
	v.ProjectSlugInput = projectSlugInput
	v.ChatSessionsToken = chatSessionsToken

	return v, nil
}

// BuildGenerateTitlePayload builds the payload for the chat generateTitle
// endpoint from CLI flags.
func BuildGenerateTitlePayload(chatGenerateTitleBody string, chatGenerateTitleSessionToken string, chatGenerateTitleProjectSlugInput string, chatGenerateTitleChatSessionsToken string) (*chat.GenerateTitlePayload, error) {
	var err error
	var body GenerateTitleRequestBody
	{
		err = json.Unmarshal([]byte(chatGenerateTitleBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"id\": \"Voluptate vel est vel quibusdam.\"\n   }'")
		}
	}
	var sessionToken *string
	{
		if chatGenerateTitleSessionToken != "" {
			sessionToken = &chatGenerateTitleSessionToken
		}
	}
	var projectSlugInput *string
	{
		if chatGenerateTitleProjectSlugInput != "" {
			projectSlugInput = &chatGenerateTitleProjectSlugInput
		}
	}
	var chatSessionsToken *string
	{
		if chatGenerateTitleChatSessionsToken != "" {
			chatSessionsToken = &chatGenerateTitleChatSessionsToken
		}
	}
	v := &chat.GenerateTitlePayload{
		ID: body.ID,
	}
	v.SessionToken = sessionToken
	v.ProjectSlugInput = projectSlugInput
	v.ChatSessionsToken = chatSessionsToken

	return v, nil
}

// BuildGenerateFollowOnSuggestionsPayload builds the payload for the chat
// generateFollowOnSuggestions endpoint from CLI flags.
func BuildGenerateFollowOnSuggestionsPayload(chatGenerateFollowOnSuggestionsBody string, chatGenerateFollowOnSuggestionsSessionToken string, chatGenerateFollowOnSuggestionsProjectSlugInput string, chatGenerateFollowOnSuggestionsChatSessionsToken string) (*chat.GenerateFollowOnSuggestionsPayload, error) {
	var err error
	var body GenerateFollowOnSuggestionsRequestBody
	{
		err = json.Unmarshal([]byte(chatGenerateFollowOnSuggestionsBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"count\": 6,\n      \"messages\": [\n         {\n            \"content\": \"Doloremque repellat molestiae.\",\n            \"role\": \"Aut minus.\"\n         },\n         {\n            \"content\": \"Doloremque repellat molestiae.\",\n            \"role\": \"Aut minus.\"\n         }\n      ]\n   }'")
		}
		if body.Messages == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("messages", "body"))
		}
		if body.Count < 1 {
			err = goa.MergeErrors(err, goa.InvalidRangeError("body.count", body.Count, 1, true))
		}
		if body.Count > 10 {
			err = goa.MergeErrors(err, goa.InvalidRangeError("body.count", body.Count, 10, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var sessionToken *string
	{
		if chatGenerateFollowOnSuggestionsSessionToken != "" {
			sessionToken = &chatGenerateFollowOnSuggestionsSessionToken
		}
	}
	var projectSlugInput *string
	{
		if chatGenerateFollowOnSuggestionsProjectSlugInput != "" {
			projectSlugInput = &chatGenerateFollowOnSuggestionsProjectSlugInput
		}
	}
	var chatSessionsToken *string
	{
		if chatGenerateFollowOnSuggestionsChatSessionsToken != "" {
			chatSessionsToken = &chatGenerateFollowOnSuggestionsChatSessionsToken
		}
	}
	v := &chat.GenerateFollowOnSuggestionsPayload{
		Count: body.Count,
	}
	if body.Messages != nil {
		v.Messages = make([]*chat.SuggestionMessage, len(body.Messages))
		for i, val := range body.Messages {
			if val == nil {
				v.Messages[i] = nil
				continue
			}
			v.Messages[i] = marshalSuggestionMessageRequestBodyToChatSuggestionMessage(val)
		}
	} else {
		v.Messages = []*chat.SuggestionMessage{}
	}
	{
		var zero int
		if v.Count == zero {
			v.Count = 3
		}
	}
	v.SessionToken = sessionToken
	v.ProjectSlugInput = projectSlugInput
	v.ChatSessionsToken = chatSessionsToken

	return v, nil
}

// BuildCreditUsagePayload builds the payload for the chat creditUsage endpoint
// from CLI flags.
func BuildCreditUsagePayload(chatCreditUsageSessionToken string, chatCreditUsageProjectSlugInput string, chatCreditUsageChatSessionsToken string) (*chat.CreditUsagePayload, error) {
	var sessionToken *string
	{
		if chatCreditUsageSessionToken != "" {
			sessionToken = &chatCreditUsageSessionToken
		}
	}
	var projectSlugInput *string
	{
		if chatCreditUsageProjectSlugInput != "" {
			projectSlugInput = &chatCreditUsageProjectSlugInput
		}
	}
	var chatSessionsToken *string
	{
		if chatCreditUsageChatSessionsToken != "" {
			chatSessionsToken = &chatCreditUsageChatSessionsToken
		}
	}
	v := &chat.CreditUsagePayload{}
	v.SessionToken = sessionToken
	v.ProjectSlugInput = projectSlugInput
	v.ChatSessionsToken = chatSessionsToken

	return v, nil
}
