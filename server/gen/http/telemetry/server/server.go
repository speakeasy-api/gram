// Code generated by goa v3.24.2, DO NOT EDIT.
//
// telemetry HTTP server
//
// Command:
// $ goa gen github.com/speakeasy-api/gram/server/design

package server

import (
	"context"
	"net/http"

	telemetry "github.com/speakeasy-api/gram/server/gen/telemetry"
	otelhttp "go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp"
	goahttp "goa.design/goa/v3/http"
	goa "goa.design/goa/v3/pkg"
)

// Server lists the telemetry service endpoint HTTP handlers.
type Server struct {
	Mounts                   []*MountPoint
	SearchLogs               http.Handler
	SearchToolCalls          http.Handler
	SearchChats              http.Handler
	SearchUsers              http.Handler
	CaptureEvent             http.Handler
	GetProjectMetricsSummary http.Handler
	GetUserMetricsSummary    http.Handler
	GetObservabilityOverview http.Handler
	ListFilterOptions        http.Handler
}

// MountPoint holds information about the mounted endpoints.
type MountPoint struct {
	// Method is the name of the service method served by the mounted HTTP handler.
	Method string
	// Verb is the HTTP method used to match requests to the mounted handler.
	Verb string
	// Pattern is the HTTP request path pattern used to match requests to the
	// mounted handler.
	Pattern string
}

// New instantiates HTTP handlers for all the telemetry service endpoints using
// the provided encoder and decoder. The handlers are mounted on the given mux
// using the HTTP verb and path defined in the design. errhandler is called
// whenever a response fails to be encoded. formatter is used to format errors
// returned by the service methods prior to encoding. Both errhandler and
// formatter are optional and can be nil.
func New(
	e *telemetry.Endpoints,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) *Server {
	return &Server{
		Mounts: []*MountPoint{
			{"SearchLogs", "POST", "/rpc/telemetry.searchLogs"},
			{"SearchToolCalls", "POST", "/rpc/telemetry.searchToolCalls"},
			{"SearchChats", "POST", "/rpc/telemetry.searchChats"},
			{"SearchUsers", "POST", "/rpc/telemetry.searchUsers"},
			{"CaptureEvent", "POST", "/rpc/telemetry.captureEvent"},
			{"GetProjectMetricsSummary", "POST", "/rpc/telemetry.getProjectMetricsSummary"},
			{"GetUserMetricsSummary", "POST", "/rpc/telemetry.getUserMetricsSummary"},
			{"GetObservabilityOverview", "POST", "/rpc/telemetry.getObservabilityOverview"},
			{"ListFilterOptions", "POST", "/rpc/telemetry.listFilterOptions"},
		},
		SearchLogs:               NewSearchLogsHandler(e.SearchLogs, mux, decoder, encoder, errhandler, formatter),
		SearchToolCalls:          NewSearchToolCallsHandler(e.SearchToolCalls, mux, decoder, encoder, errhandler, formatter),
		SearchChats:              NewSearchChatsHandler(e.SearchChats, mux, decoder, encoder, errhandler, formatter),
		SearchUsers:              NewSearchUsersHandler(e.SearchUsers, mux, decoder, encoder, errhandler, formatter),
		CaptureEvent:             NewCaptureEventHandler(e.CaptureEvent, mux, decoder, encoder, errhandler, formatter),
		GetProjectMetricsSummary: NewGetProjectMetricsSummaryHandler(e.GetProjectMetricsSummary, mux, decoder, encoder, errhandler, formatter),
		GetUserMetricsSummary:    NewGetUserMetricsSummaryHandler(e.GetUserMetricsSummary, mux, decoder, encoder, errhandler, formatter),
		GetObservabilityOverview: NewGetObservabilityOverviewHandler(e.GetObservabilityOverview, mux, decoder, encoder, errhandler, formatter),
		ListFilterOptions:        NewListFilterOptionsHandler(e.ListFilterOptions, mux, decoder, encoder, errhandler, formatter),
	}
}

// Service returns the name of the service served.
func (s *Server) Service() string { return "telemetry" }

// Use wraps the server handlers with the given middleware.
func (s *Server) Use(m func(http.Handler) http.Handler) {
	s.SearchLogs = m(s.SearchLogs)
	s.SearchToolCalls = m(s.SearchToolCalls)
	s.SearchChats = m(s.SearchChats)
	s.SearchUsers = m(s.SearchUsers)
	s.CaptureEvent = m(s.CaptureEvent)
	s.GetProjectMetricsSummary = m(s.GetProjectMetricsSummary)
	s.GetUserMetricsSummary = m(s.GetUserMetricsSummary)
	s.GetObservabilityOverview = m(s.GetObservabilityOverview)
	s.ListFilterOptions = m(s.ListFilterOptions)
}

// MethodNames returns the methods served.
func (s *Server) MethodNames() []string { return telemetry.MethodNames[:] }

// Mount configures the mux to serve the telemetry endpoints.
func Mount(mux goahttp.Muxer, h *Server) {
	MountSearchLogsHandler(mux, h.SearchLogs)
	MountSearchToolCallsHandler(mux, h.SearchToolCalls)
	MountSearchChatsHandler(mux, h.SearchChats)
	MountSearchUsersHandler(mux, h.SearchUsers)
	MountCaptureEventHandler(mux, h.CaptureEvent)
	MountGetProjectMetricsSummaryHandler(mux, h.GetProjectMetricsSummary)
	MountGetUserMetricsSummaryHandler(mux, h.GetUserMetricsSummary)
	MountGetObservabilityOverviewHandler(mux, h.GetObservabilityOverview)
	MountListFilterOptionsHandler(mux, h.ListFilterOptions)
}

// Mount configures the mux to serve the telemetry endpoints.
func (s *Server) Mount(mux goahttp.Muxer) {
	Mount(mux, s)
}

// MountSearchLogsHandler configures the mux to serve the "telemetry" service
// "searchLogs" endpoint.
func MountSearchLogsHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/rpc/telemetry.searchLogs", otelhttp.WithRouteTag("/rpc/telemetry.searchLogs", f).ServeHTTP)
}

// NewSearchLogsHandler creates a HTTP handler which loads the HTTP request and
// calls the "telemetry" service "searchLogs" endpoint.
func NewSearchLogsHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeSearchLogsRequest(mux, decoder)
		encodeResponse = EncodeSearchLogsResponse(encoder)
		encodeError    = EncodeSearchLogsError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "searchLogs")
		ctx = context.WithValue(ctx, goa.ServiceKey, "telemetry")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			if errhandler != nil {
				errhandler(ctx, w, err)
			}
		}
	})
}

// MountSearchToolCallsHandler configures the mux to serve the "telemetry"
// service "searchToolCalls" endpoint.
func MountSearchToolCallsHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/rpc/telemetry.searchToolCalls", otelhttp.WithRouteTag("/rpc/telemetry.searchToolCalls", f).ServeHTTP)
}

// NewSearchToolCallsHandler creates a HTTP handler which loads the HTTP
// request and calls the "telemetry" service "searchToolCalls" endpoint.
func NewSearchToolCallsHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeSearchToolCallsRequest(mux, decoder)
		encodeResponse = EncodeSearchToolCallsResponse(encoder)
		encodeError    = EncodeSearchToolCallsError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "searchToolCalls")
		ctx = context.WithValue(ctx, goa.ServiceKey, "telemetry")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			if errhandler != nil {
				errhandler(ctx, w, err)
			}
		}
	})
}

// MountSearchChatsHandler configures the mux to serve the "telemetry" service
// "searchChats" endpoint.
func MountSearchChatsHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/rpc/telemetry.searchChats", otelhttp.WithRouteTag("/rpc/telemetry.searchChats", f).ServeHTTP)
}

// NewSearchChatsHandler creates a HTTP handler which loads the HTTP request
// and calls the "telemetry" service "searchChats" endpoint.
func NewSearchChatsHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeSearchChatsRequest(mux, decoder)
		encodeResponse = EncodeSearchChatsResponse(encoder)
		encodeError    = EncodeSearchChatsError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "searchChats")
		ctx = context.WithValue(ctx, goa.ServiceKey, "telemetry")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			if errhandler != nil {
				errhandler(ctx, w, err)
			}
		}
	})
}

// MountSearchUsersHandler configures the mux to serve the "telemetry" service
// "searchUsers" endpoint.
func MountSearchUsersHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/rpc/telemetry.searchUsers", otelhttp.WithRouteTag("/rpc/telemetry.searchUsers", f).ServeHTTP)
}

// NewSearchUsersHandler creates a HTTP handler which loads the HTTP request
// and calls the "telemetry" service "searchUsers" endpoint.
func NewSearchUsersHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeSearchUsersRequest(mux, decoder)
		encodeResponse = EncodeSearchUsersResponse(encoder)
		encodeError    = EncodeSearchUsersError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "searchUsers")
		ctx = context.WithValue(ctx, goa.ServiceKey, "telemetry")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			if errhandler != nil {
				errhandler(ctx, w, err)
			}
		}
	})
}

// MountCaptureEventHandler configures the mux to serve the "telemetry" service
// "captureEvent" endpoint.
func MountCaptureEventHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/rpc/telemetry.captureEvent", otelhttp.WithRouteTag("/rpc/telemetry.captureEvent", f).ServeHTTP)
}

// NewCaptureEventHandler creates a HTTP handler which loads the HTTP request
// and calls the "telemetry" service "captureEvent" endpoint.
func NewCaptureEventHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeCaptureEventRequest(mux, decoder)
		encodeResponse = EncodeCaptureEventResponse(encoder)
		encodeError    = EncodeCaptureEventError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "captureEvent")
		ctx = context.WithValue(ctx, goa.ServiceKey, "telemetry")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			if errhandler != nil {
				errhandler(ctx, w, err)
			}
		}
	})
}

// MountGetProjectMetricsSummaryHandler configures the mux to serve the
// "telemetry" service "getProjectMetricsSummary" endpoint.
func MountGetProjectMetricsSummaryHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/rpc/telemetry.getProjectMetricsSummary", otelhttp.WithRouteTag("/rpc/telemetry.getProjectMetricsSummary", f).ServeHTTP)
}

// NewGetProjectMetricsSummaryHandler creates a HTTP handler which loads the
// HTTP request and calls the "telemetry" service "getProjectMetricsSummary"
// endpoint.
func NewGetProjectMetricsSummaryHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeGetProjectMetricsSummaryRequest(mux, decoder)
		encodeResponse = EncodeGetProjectMetricsSummaryResponse(encoder)
		encodeError    = EncodeGetProjectMetricsSummaryError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "getProjectMetricsSummary")
		ctx = context.WithValue(ctx, goa.ServiceKey, "telemetry")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			if errhandler != nil {
				errhandler(ctx, w, err)
			}
		}
	})
}

// MountGetUserMetricsSummaryHandler configures the mux to serve the
// "telemetry" service "getUserMetricsSummary" endpoint.
func MountGetUserMetricsSummaryHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/rpc/telemetry.getUserMetricsSummary", otelhttp.WithRouteTag("/rpc/telemetry.getUserMetricsSummary", f).ServeHTTP)
}

// NewGetUserMetricsSummaryHandler creates a HTTP handler which loads the HTTP
// request and calls the "telemetry" service "getUserMetricsSummary" endpoint.
func NewGetUserMetricsSummaryHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeGetUserMetricsSummaryRequest(mux, decoder)
		encodeResponse = EncodeGetUserMetricsSummaryResponse(encoder)
		encodeError    = EncodeGetUserMetricsSummaryError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "getUserMetricsSummary")
		ctx = context.WithValue(ctx, goa.ServiceKey, "telemetry")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			if errhandler != nil {
				errhandler(ctx, w, err)
			}
		}
	})
}

// MountGetObservabilityOverviewHandler configures the mux to serve the
// "telemetry" service "getObservabilityOverview" endpoint.
func MountGetObservabilityOverviewHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/rpc/telemetry.getObservabilityOverview", otelhttp.WithRouteTag("/rpc/telemetry.getObservabilityOverview", f).ServeHTTP)
}

// NewGetObservabilityOverviewHandler creates a HTTP handler which loads the
// HTTP request and calls the "telemetry" service "getObservabilityOverview"
// endpoint.
func NewGetObservabilityOverviewHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeGetObservabilityOverviewRequest(mux, decoder)
		encodeResponse = EncodeGetObservabilityOverviewResponse(encoder)
		encodeError    = EncodeGetObservabilityOverviewError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "getObservabilityOverview")
		ctx = context.WithValue(ctx, goa.ServiceKey, "telemetry")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			if errhandler != nil {
				errhandler(ctx, w, err)
			}
		}
	})
}

// MountListFilterOptionsHandler configures the mux to serve the "telemetry"
// service "listFilterOptions" endpoint.
func MountListFilterOptionsHandler(mux goahttp.Muxer, h http.Handler) {
	f, ok := h.(http.HandlerFunc)
	if !ok {
		f = func(w http.ResponseWriter, r *http.Request) {
			h.ServeHTTP(w, r)
		}
	}
	mux.Handle("POST", "/rpc/telemetry.listFilterOptions", otelhttp.WithRouteTag("/rpc/telemetry.listFilterOptions", f).ServeHTTP)
}

// NewListFilterOptionsHandler creates a HTTP handler which loads the HTTP
// request and calls the "telemetry" service "listFilterOptions" endpoint.
func NewListFilterOptionsHandler(
	endpoint goa.Endpoint,
	mux goahttp.Muxer,
	decoder func(*http.Request) goahttp.Decoder,
	encoder func(context.Context, http.ResponseWriter) goahttp.Encoder,
	errhandler func(context.Context, http.ResponseWriter, error),
	formatter func(ctx context.Context, err error) goahttp.Statuser,
) http.Handler {
	var (
		decodeRequest  = DecodeListFilterOptionsRequest(mux, decoder)
		encodeResponse = EncodeListFilterOptionsResponse(encoder)
		encodeError    = EncodeListFilterOptionsError(encoder, formatter)
	)
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ctx := context.WithValue(r.Context(), goahttp.AcceptTypeKey, r.Header.Get("Accept"))
		ctx = context.WithValue(ctx, goa.MethodKey, "listFilterOptions")
		ctx = context.WithValue(ctx, goa.ServiceKey, "telemetry")
		payload, err := decodeRequest(r)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		res, err := endpoint(ctx, payload)
		if err != nil {
			if err := encodeError(ctx, w, err); err != nil && errhandler != nil {
				errhandler(ctx, w, err)
			}
			return
		}
		if err := encodeResponse(ctx, w, res); err != nil {
			if errhandler != nil {
				errhandler(ctx, w, err)
			}
		}
	})
}
