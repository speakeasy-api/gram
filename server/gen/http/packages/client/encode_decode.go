// Code generated by goa v3.22.2, DO NOT EDIT.
//
// packages HTTP client encoders and decoders
//
// Command:
// $ goa gen github.com/speakeasy-api/gram/server/design

package client

import (
	"bytes"
	"context"
	"io"
	"net/http"
	"net/url"

	packages "github.com/speakeasy-api/gram/server/gen/packages"
	goahttp "goa.design/goa/v3/http"
)

// BuildCreatePackageRequest instantiates a HTTP request object with method and
// path set to call the "packages" service "createPackage" endpoint
func (c *Client) BuildCreatePackageRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: CreatePackagePackagesPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("packages", "createPackage", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeCreatePackageRequest returns an encoder for requests sent to the
// packages createPackage server.
func EncodeCreatePackageRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*packages.CreatePackagePayload)
		if !ok {
			return goahttp.ErrInvalidType("packages", "createPackage", "*packages.CreatePackagePayload", v)
		}
		if p.ApikeyToken != nil {
			head := *p.ApikeyToken
			req.Header.Set("Gram-Key", head)
		}
		if p.SessionToken != nil {
			head := *p.SessionToken
			req.Header.Set("Gram-Session", head)
		}
		if p.ProjectSlugInput != nil {
			head := *p.ProjectSlugInput
			req.Header.Set("Gram-Project", head)
		}
		body := NewCreatePackageRequestBody(p)
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("packages", "createPackage", err)
		}
		return nil
	}
}

// DecodeCreatePackageResponse returns a decoder for responses returned by the
// packages createPackage endpoint. restoreBody controls whether the response
// body should be restored after having been read.
// DecodeCreatePackageResponse may return the following errors:
//   - "unauthorized" (type *goa.ServiceError): http.StatusUnauthorized
//   - "forbidden" (type *goa.ServiceError): http.StatusForbidden
//   - "bad_request" (type *goa.ServiceError): http.StatusBadRequest
//   - "not_found" (type *goa.ServiceError): http.StatusNotFound
//   - "conflict" (type *goa.ServiceError): http.StatusConflict
//   - "unsupported_media" (type *goa.ServiceError): http.StatusUnsupportedMediaType
//   - "invalid" (type *goa.ServiceError): http.StatusUnprocessableEntity
//   - "invariant_violation" (type *goa.ServiceError): http.StatusInternalServerError
//   - "unexpected" (type *goa.ServiceError): http.StatusInternalServerError
//   - "gateway_error" (type *goa.ServiceError): http.StatusBadGateway
//   - error: internal error
func DecodeCreatePackageResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		} else {
			defer resp.Body.Close()
		}
		switch resp.StatusCode {
		case http.StatusOK:
			var (
				body CreatePackageResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "createPackage", err)
			}
			err = ValidateCreatePackageResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "createPackage", err)
			}
			res := NewCreatePackageResultOK(&body)
			return res, nil
		case http.StatusUnauthorized:
			var (
				body CreatePackageUnauthorizedResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "createPackage", err)
			}
			err = ValidateCreatePackageUnauthorizedResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "createPackage", err)
			}
			return nil, NewCreatePackageUnauthorized(&body)
		case http.StatusForbidden:
			var (
				body CreatePackageForbiddenResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "createPackage", err)
			}
			err = ValidateCreatePackageForbiddenResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "createPackage", err)
			}
			return nil, NewCreatePackageForbidden(&body)
		case http.StatusBadRequest:
			var (
				body CreatePackageBadRequestResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "createPackage", err)
			}
			err = ValidateCreatePackageBadRequestResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "createPackage", err)
			}
			return nil, NewCreatePackageBadRequest(&body)
		case http.StatusNotFound:
			var (
				body CreatePackageNotFoundResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "createPackage", err)
			}
			err = ValidateCreatePackageNotFoundResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "createPackage", err)
			}
			return nil, NewCreatePackageNotFound(&body)
		case http.StatusConflict:
			var (
				body CreatePackageConflictResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "createPackage", err)
			}
			err = ValidateCreatePackageConflictResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "createPackage", err)
			}
			return nil, NewCreatePackageConflict(&body)
		case http.StatusUnsupportedMediaType:
			var (
				body CreatePackageUnsupportedMediaResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "createPackage", err)
			}
			err = ValidateCreatePackageUnsupportedMediaResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "createPackage", err)
			}
			return nil, NewCreatePackageUnsupportedMedia(&body)
		case http.StatusUnprocessableEntity:
			var (
				body CreatePackageInvalidResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "createPackage", err)
			}
			err = ValidateCreatePackageInvalidResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "createPackage", err)
			}
			return nil, NewCreatePackageInvalid(&body)
		case http.StatusInternalServerError:
			en := resp.Header.Get("goa-error")
			switch en {
			case "invariant_violation":
				var (
					body CreatePackageInvariantViolationResponseBody
					err  error
				)
				err = decoder(resp).Decode(&body)
				if err != nil {
					return nil, goahttp.ErrDecodingError("packages", "createPackage", err)
				}
				err = ValidateCreatePackageInvariantViolationResponseBody(&body)
				if err != nil {
					return nil, goahttp.ErrValidationError("packages", "createPackage", err)
				}
				return nil, NewCreatePackageInvariantViolation(&body)
			case "unexpected":
				var (
					body CreatePackageUnexpectedResponseBody
					err  error
				)
				err = decoder(resp).Decode(&body)
				if err != nil {
					return nil, goahttp.ErrDecodingError("packages", "createPackage", err)
				}
				err = ValidateCreatePackageUnexpectedResponseBody(&body)
				if err != nil {
					return nil, goahttp.ErrValidationError("packages", "createPackage", err)
				}
				return nil, NewCreatePackageUnexpected(&body)
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("packages", "createPackage", resp.StatusCode, string(body))
			}
		case http.StatusBadGateway:
			var (
				body CreatePackageGatewayErrorResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "createPackage", err)
			}
			err = ValidateCreatePackageGatewayErrorResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "createPackage", err)
			}
			return nil, NewCreatePackageGatewayError(&body)
		default:
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("packages", "createPackage", resp.StatusCode, string(body))
		}
	}
}

// BuildUpdatePackageRequest instantiates a HTTP request object with method and
// path set to call the "packages" service "updatePackage" endpoint
func (c *Client) BuildUpdatePackageRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: UpdatePackagePackagesPath()}
	req, err := http.NewRequest("PUT", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("packages", "updatePackage", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeUpdatePackageRequest returns an encoder for requests sent to the
// packages updatePackage server.
func EncodeUpdatePackageRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*packages.UpdatePackagePayload)
		if !ok {
			return goahttp.ErrInvalidType("packages", "updatePackage", "*packages.UpdatePackagePayload", v)
		}
		if p.ApikeyToken != nil {
			head := *p.ApikeyToken
			req.Header.Set("Gram-Key", head)
		}
		if p.SessionToken != nil {
			head := *p.SessionToken
			req.Header.Set("Gram-Session", head)
		}
		if p.ProjectSlugInput != nil {
			head := *p.ProjectSlugInput
			req.Header.Set("Gram-Project", head)
		}
		body := NewUpdatePackageRequestBody(p)
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("packages", "updatePackage", err)
		}
		return nil
	}
}

// DecodeUpdatePackageResponse returns a decoder for responses returned by the
// packages updatePackage endpoint. restoreBody controls whether the response
// body should be restored after having been read.
// DecodeUpdatePackageResponse may return the following errors:
//   - "unauthorized" (type *goa.ServiceError): http.StatusUnauthorized
//   - "forbidden" (type *goa.ServiceError): http.StatusForbidden
//   - "bad_request" (type *goa.ServiceError): http.StatusBadRequest
//   - "not_found" (type *goa.ServiceError): http.StatusNotFound
//   - "conflict" (type *goa.ServiceError): http.StatusConflict
//   - "unsupported_media" (type *goa.ServiceError): http.StatusUnsupportedMediaType
//   - "invalid" (type *goa.ServiceError): http.StatusUnprocessableEntity
//   - "invariant_violation" (type *goa.ServiceError): http.StatusInternalServerError
//   - "unexpected" (type *goa.ServiceError): http.StatusInternalServerError
//   - "gateway_error" (type *goa.ServiceError): http.StatusBadGateway
//   - "not_modified" (type *packages.NotModified): http.StatusNotModified
//   - error: internal error
func DecodeUpdatePackageResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		} else {
			defer resp.Body.Close()
		}
		switch resp.StatusCode {
		case http.StatusOK:
			var (
				body UpdatePackageResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
			}
			err = ValidateUpdatePackageResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
			}
			res := NewUpdatePackageResultOK(&body)
			return res, nil
		case http.StatusUnauthorized:
			var (
				body UpdatePackageUnauthorizedResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
			}
			err = ValidateUpdatePackageUnauthorizedResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
			}
			return nil, NewUpdatePackageUnauthorized(&body)
		case http.StatusForbidden:
			var (
				body UpdatePackageForbiddenResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
			}
			err = ValidateUpdatePackageForbiddenResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
			}
			return nil, NewUpdatePackageForbidden(&body)
		case http.StatusBadRequest:
			var (
				body UpdatePackageBadRequestResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
			}
			err = ValidateUpdatePackageBadRequestResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
			}
			return nil, NewUpdatePackageBadRequest(&body)
		case http.StatusNotFound:
			var (
				body UpdatePackageNotFoundResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
			}
			err = ValidateUpdatePackageNotFoundResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
			}
			return nil, NewUpdatePackageNotFound(&body)
		case http.StatusConflict:
			var (
				body UpdatePackageConflictResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
			}
			err = ValidateUpdatePackageConflictResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
			}
			return nil, NewUpdatePackageConflict(&body)
		case http.StatusUnsupportedMediaType:
			var (
				body UpdatePackageUnsupportedMediaResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
			}
			err = ValidateUpdatePackageUnsupportedMediaResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
			}
			return nil, NewUpdatePackageUnsupportedMedia(&body)
		case http.StatusUnprocessableEntity:
			var (
				body UpdatePackageInvalidResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
			}
			err = ValidateUpdatePackageInvalidResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
			}
			return nil, NewUpdatePackageInvalid(&body)
		case http.StatusInternalServerError:
			en := resp.Header.Get("goa-error")
			switch en {
			case "invariant_violation":
				var (
					body UpdatePackageInvariantViolationResponseBody
					err  error
				)
				err = decoder(resp).Decode(&body)
				if err != nil {
					return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
				}
				err = ValidateUpdatePackageInvariantViolationResponseBody(&body)
				if err != nil {
					return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
				}
				return nil, NewUpdatePackageInvariantViolation(&body)
			case "unexpected":
				var (
					body UpdatePackageUnexpectedResponseBody
					err  error
				)
				err = decoder(resp).Decode(&body)
				if err != nil {
					return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
				}
				err = ValidateUpdatePackageUnexpectedResponseBody(&body)
				if err != nil {
					return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
				}
				return nil, NewUpdatePackageUnexpected(&body)
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("packages", "updatePackage", resp.StatusCode, string(body))
			}
		case http.StatusBadGateway:
			var (
				body UpdatePackageGatewayErrorResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
			}
			err = ValidateUpdatePackageGatewayErrorResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
			}
			return nil, NewUpdatePackageGatewayError(&body)
		case http.StatusNotModified:
			var (
				body UpdatePackageNotModifiedResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "updatePackage", err)
			}
			err = ValidateUpdatePackageNotModifiedResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "updatePackage", err)
			}
			return nil, NewUpdatePackageNotModified(&body)
		default:
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("packages", "updatePackage", resp.StatusCode, string(body))
		}
	}
}

// BuildListPackagesRequest instantiates a HTTP request object with method and
// path set to call the "packages" service "listPackages" endpoint
func (c *Client) BuildListPackagesRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: ListPackagesPackagesPath()}
	req, err := http.NewRequest("GET", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("packages", "listPackages", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeListPackagesRequest returns an encoder for requests sent to the
// packages listPackages server.
func EncodeListPackagesRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*packages.ListPackagesPayload)
		if !ok {
			return goahttp.ErrInvalidType("packages", "listPackages", "*packages.ListPackagesPayload", v)
		}
		if p.ApikeyToken != nil {
			head := *p.ApikeyToken
			req.Header.Set("Gram-Key", head)
		}
		if p.SessionToken != nil {
			head := *p.SessionToken
			req.Header.Set("Gram-Session", head)
		}
		if p.ProjectSlugInput != nil {
			head := *p.ProjectSlugInput
			req.Header.Set("Gram-Project", head)
		}
		return nil
	}
}

// DecodeListPackagesResponse returns a decoder for responses returned by the
// packages listPackages endpoint. restoreBody controls whether the response
// body should be restored after having been read.
// DecodeListPackagesResponse may return the following errors:
//   - "unauthorized" (type *goa.ServiceError): http.StatusUnauthorized
//   - "forbidden" (type *goa.ServiceError): http.StatusForbidden
//   - "bad_request" (type *goa.ServiceError): http.StatusBadRequest
//   - "not_found" (type *goa.ServiceError): http.StatusNotFound
//   - "conflict" (type *goa.ServiceError): http.StatusConflict
//   - "unsupported_media" (type *goa.ServiceError): http.StatusUnsupportedMediaType
//   - "invalid" (type *goa.ServiceError): http.StatusUnprocessableEntity
//   - "invariant_violation" (type *goa.ServiceError): http.StatusInternalServerError
//   - "unexpected" (type *goa.ServiceError): http.StatusInternalServerError
//   - "gateway_error" (type *goa.ServiceError): http.StatusBadGateway
//   - error: internal error
func DecodeListPackagesResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		} else {
			defer resp.Body.Close()
		}
		switch resp.StatusCode {
		case http.StatusOK:
			var (
				body ListPackagesResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listPackages", err)
			}
			err = ValidateListPackagesResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listPackages", err)
			}
			res := NewListPackagesResultOK(&body)
			return res, nil
		case http.StatusUnauthorized:
			var (
				body ListPackagesUnauthorizedResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listPackages", err)
			}
			err = ValidateListPackagesUnauthorizedResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listPackages", err)
			}
			return nil, NewListPackagesUnauthorized(&body)
		case http.StatusForbidden:
			var (
				body ListPackagesForbiddenResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listPackages", err)
			}
			err = ValidateListPackagesForbiddenResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listPackages", err)
			}
			return nil, NewListPackagesForbidden(&body)
		case http.StatusBadRequest:
			var (
				body ListPackagesBadRequestResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listPackages", err)
			}
			err = ValidateListPackagesBadRequestResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listPackages", err)
			}
			return nil, NewListPackagesBadRequest(&body)
		case http.StatusNotFound:
			var (
				body ListPackagesNotFoundResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listPackages", err)
			}
			err = ValidateListPackagesNotFoundResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listPackages", err)
			}
			return nil, NewListPackagesNotFound(&body)
		case http.StatusConflict:
			var (
				body ListPackagesConflictResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listPackages", err)
			}
			err = ValidateListPackagesConflictResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listPackages", err)
			}
			return nil, NewListPackagesConflict(&body)
		case http.StatusUnsupportedMediaType:
			var (
				body ListPackagesUnsupportedMediaResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listPackages", err)
			}
			err = ValidateListPackagesUnsupportedMediaResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listPackages", err)
			}
			return nil, NewListPackagesUnsupportedMedia(&body)
		case http.StatusUnprocessableEntity:
			var (
				body ListPackagesInvalidResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listPackages", err)
			}
			err = ValidateListPackagesInvalidResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listPackages", err)
			}
			return nil, NewListPackagesInvalid(&body)
		case http.StatusInternalServerError:
			en := resp.Header.Get("goa-error")
			switch en {
			case "invariant_violation":
				var (
					body ListPackagesInvariantViolationResponseBody
					err  error
				)
				err = decoder(resp).Decode(&body)
				if err != nil {
					return nil, goahttp.ErrDecodingError("packages", "listPackages", err)
				}
				err = ValidateListPackagesInvariantViolationResponseBody(&body)
				if err != nil {
					return nil, goahttp.ErrValidationError("packages", "listPackages", err)
				}
				return nil, NewListPackagesInvariantViolation(&body)
			case "unexpected":
				var (
					body ListPackagesUnexpectedResponseBody
					err  error
				)
				err = decoder(resp).Decode(&body)
				if err != nil {
					return nil, goahttp.ErrDecodingError("packages", "listPackages", err)
				}
				err = ValidateListPackagesUnexpectedResponseBody(&body)
				if err != nil {
					return nil, goahttp.ErrValidationError("packages", "listPackages", err)
				}
				return nil, NewListPackagesUnexpected(&body)
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("packages", "listPackages", resp.StatusCode, string(body))
			}
		case http.StatusBadGateway:
			var (
				body ListPackagesGatewayErrorResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listPackages", err)
			}
			err = ValidateListPackagesGatewayErrorResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listPackages", err)
			}
			return nil, NewListPackagesGatewayError(&body)
		default:
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("packages", "listPackages", resp.StatusCode, string(body))
		}
	}
}

// BuildListVersionsRequest instantiates a HTTP request object with method and
// path set to call the "packages" service "listVersions" endpoint
func (c *Client) BuildListVersionsRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: ListVersionsPackagesPath()}
	req, err := http.NewRequest("GET", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("packages", "listVersions", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeListVersionsRequest returns an encoder for requests sent to the
// packages listVersions server.
func EncodeListVersionsRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*packages.ListVersionsPayload)
		if !ok {
			return goahttp.ErrInvalidType("packages", "listVersions", "*packages.ListVersionsPayload", v)
		}
		if p.ApikeyToken != nil {
			head := *p.ApikeyToken
			req.Header.Set("Gram-Key", head)
		}
		if p.SessionToken != nil {
			head := *p.SessionToken
			req.Header.Set("Gram-Session", head)
		}
		if p.ProjectSlugInput != nil {
			head := *p.ProjectSlugInput
			req.Header.Set("Gram-Project", head)
		}
		values := req.URL.Query()
		values.Add("name", p.Name)
		req.URL.RawQuery = values.Encode()
		return nil
	}
}

// DecodeListVersionsResponse returns a decoder for responses returned by the
// packages listVersions endpoint. restoreBody controls whether the response
// body should be restored after having been read.
// DecodeListVersionsResponse may return the following errors:
//   - "unauthorized" (type *goa.ServiceError): http.StatusUnauthorized
//   - "forbidden" (type *goa.ServiceError): http.StatusForbidden
//   - "bad_request" (type *goa.ServiceError): http.StatusBadRequest
//   - "not_found" (type *goa.ServiceError): http.StatusNotFound
//   - "conflict" (type *goa.ServiceError): http.StatusConflict
//   - "unsupported_media" (type *goa.ServiceError): http.StatusUnsupportedMediaType
//   - "invalid" (type *goa.ServiceError): http.StatusUnprocessableEntity
//   - "invariant_violation" (type *goa.ServiceError): http.StatusInternalServerError
//   - "unexpected" (type *goa.ServiceError): http.StatusInternalServerError
//   - "gateway_error" (type *goa.ServiceError): http.StatusBadGateway
//   - error: internal error
func DecodeListVersionsResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		} else {
			defer resp.Body.Close()
		}
		switch resp.StatusCode {
		case http.StatusOK:
			var (
				body ListVersionsResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listVersions", err)
			}
			err = ValidateListVersionsResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listVersions", err)
			}
			res := NewListVersionsResultOK(&body)
			return res, nil
		case http.StatusUnauthorized:
			var (
				body ListVersionsUnauthorizedResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listVersions", err)
			}
			err = ValidateListVersionsUnauthorizedResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listVersions", err)
			}
			return nil, NewListVersionsUnauthorized(&body)
		case http.StatusForbidden:
			var (
				body ListVersionsForbiddenResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listVersions", err)
			}
			err = ValidateListVersionsForbiddenResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listVersions", err)
			}
			return nil, NewListVersionsForbidden(&body)
		case http.StatusBadRequest:
			var (
				body ListVersionsBadRequestResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listVersions", err)
			}
			err = ValidateListVersionsBadRequestResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listVersions", err)
			}
			return nil, NewListVersionsBadRequest(&body)
		case http.StatusNotFound:
			var (
				body ListVersionsNotFoundResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listVersions", err)
			}
			err = ValidateListVersionsNotFoundResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listVersions", err)
			}
			return nil, NewListVersionsNotFound(&body)
		case http.StatusConflict:
			var (
				body ListVersionsConflictResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listVersions", err)
			}
			err = ValidateListVersionsConflictResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listVersions", err)
			}
			return nil, NewListVersionsConflict(&body)
		case http.StatusUnsupportedMediaType:
			var (
				body ListVersionsUnsupportedMediaResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listVersions", err)
			}
			err = ValidateListVersionsUnsupportedMediaResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listVersions", err)
			}
			return nil, NewListVersionsUnsupportedMedia(&body)
		case http.StatusUnprocessableEntity:
			var (
				body ListVersionsInvalidResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listVersions", err)
			}
			err = ValidateListVersionsInvalidResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listVersions", err)
			}
			return nil, NewListVersionsInvalid(&body)
		case http.StatusInternalServerError:
			en := resp.Header.Get("goa-error")
			switch en {
			case "invariant_violation":
				var (
					body ListVersionsInvariantViolationResponseBody
					err  error
				)
				err = decoder(resp).Decode(&body)
				if err != nil {
					return nil, goahttp.ErrDecodingError("packages", "listVersions", err)
				}
				err = ValidateListVersionsInvariantViolationResponseBody(&body)
				if err != nil {
					return nil, goahttp.ErrValidationError("packages", "listVersions", err)
				}
				return nil, NewListVersionsInvariantViolation(&body)
			case "unexpected":
				var (
					body ListVersionsUnexpectedResponseBody
					err  error
				)
				err = decoder(resp).Decode(&body)
				if err != nil {
					return nil, goahttp.ErrDecodingError("packages", "listVersions", err)
				}
				err = ValidateListVersionsUnexpectedResponseBody(&body)
				if err != nil {
					return nil, goahttp.ErrValidationError("packages", "listVersions", err)
				}
				return nil, NewListVersionsUnexpected(&body)
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("packages", "listVersions", resp.StatusCode, string(body))
			}
		case http.StatusBadGateway:
			var (
				body ListVersionsGatewayErrorResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "listVersions", err)
			}
			err = ValidateListVersionsGatewayErrorResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "listVersions", err)
			}
			return nil, NewListVersionsGatewayError(&body)
		default:
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("packages", "listVersions", resp.StatusCode, string(body))
		}
	}
}

// BuildPublishRequest instantiates a HTTP request object with method and path
// set to call the "packages" service "publish" endpoint
func (c *Client) BuildPublishRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: PublishPackagesPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("packages", "publish", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodePublishRequest returns an encoder for requests sent to the packages
// publish server.
func EncodePublishRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*packages.PublishPayload)
		if !ok {
			return goahttp.ErrInvalidType("packages", "publish", "*packages.PublishPayload", v)
		}
		if p.ApikeyToken != nil {
			head := *p.ApikeyToken
			req.Header.Set("Gram-Key", head)
		}
		if p.SessionToken != nil {
			head := *p.SessionToken
			req.Header.Set("Gram-Session", head)
		}
		if p.ProjectSlugInput != nil {
			head := *p.ProjectSlugInput
			req.Header.Set("Gram-Project", head)
		}
		body := NewPublishRequestBody(p)
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("packages", "publish", err)
		}
		return nil
	}
}

// DecodePublishResponse returns a decoder for responses returned by the
// packages publish endpoint. restoreBody controls whether the response body
// should be restored after having been read.
// DecodePublishResponse may return the following errors:
//   - "unauthorized" (type *goa.ServiceError): http.StatusUnauthorized
//   - "forbidden" (type *goa.ServiceError): http.StatusForbidden
//   - "bad_request" (type *goa.ServiceError): http.StatusBadRequest
//   - "not_found" (type *goa.ServiceError): http.StatusNotFound
//   - "conflict" (type *goa.ServiceError): http.StatusConflict
//   - "unsupported_media" (type *goa.ServiceError): http.StatusUnsupportedMediaType
//   - "invalid" (type *goa.ServiceError): http.StatusUnprocessableEntity
//   - "invariant_violation" (type *goa.ServiceError): http.StatusInternalServerError
//   - "unexpected" (type *goa.ServiceError): http.StatusInternalServerError
//   - "gateway_error" (type *goa.ServiceError): http.StatusBadGateway
//   - error: internal error
func DecodePublishResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		} else {
			defer resp.Body.Close()
		}
		switch resp.StatusCode {
		case http.StatusOK:
			var (
				body PublishResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "publish", err)
			}
			err = ValidatePublishResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "publish", err)
			}
			res := NewPublishPackageResultOK(&body)
			return res, nil
		case http.StatusUnauthorized:
			var (
				body PublishUnauthorizedResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "publish", err)
			}
			err = ValidatePublishUnauthorizedResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "publish", err)
			}
			return nil, NewPublishUnauthorized(&body)
		case http.StatusForbidden:
			var (
				body PublishForbiddenResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "publish", err)
			}
			err = ValidatePublishForbiddenResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "publish", err)
			}
			return nil, NewPublishForbidden(&body)
		case http.StatusBadRequest:
			var (
				body PublishBadRequestResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "publish", err)
			}
			err = ValidatePublishBadRequestResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "publish", err)
			}
			return nil, NewPublishBadRequest(&body)
		case http.StatusNotFound:
			var (
				body PublishNotFoundResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "publish", err)
			}
			err = ValidatePublishNotFoundResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "publish", err)
			}
			return nil, NewPublishNotFound(&body)
		case http.StatusConflict:
			var (
				body PublishConflictResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "publish", err)
			}
			err = ValidatePublishConflictResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "publish", err)
			}
			return nil, NewPublishConflict(&body)
		case http.StatusUnsupportedMediaType:
			var (
				body PublishUnsupportedMediaResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "publish", err)
			}
			err = ValidatePublishUnsupportedMediaResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "publish", err)
			}
			return nil, NewPublishUnsupportedMedia(&body)
		case http.StatusUnprocessableEntity:
			var (
				body PublishInvalidResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "publish", err)
			}
			err = ValidatePublishInvalidResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "publish", err)
			}
			return nil, NewPublishInvalid(&body)
		case http.StatusInternalServerError:
			en := resp.Header.Get("goa-error")
			switch en {
			case "invariant_violation":
				var (
					body PublishInvariantViolationResponseBody
					err  error
				)
				err = decoder(resp).Decode(&body)
				if err != nil {
					return nil, goahttp.ErrDecodingError("packages", "publish", err)
				}
				err = ValidatePublishInvariantViolationResponseBody(&body)
				if err != nil {
					return nil, goahttp.ErrValidationError("packages", "publish", err)
				}
				return nil, NewPublishInvariantViolation(&body)
			case "unexpected":
				var (
					body PublishUnexpectedResponseBody
					err  error
				)
				err = decoder(resp).Decode(&body)
				if err != nil {
					return nil, goahttp.ErrDecodingError("packages", "publish", err)
				}
				err = ValidatePublishUnexpectedResponseBody(&body)
				if err != nil {
					return nil, goahttp.ErrValidationError("packages", "publish", err)
				}
				return nil, NewPublishUnexpected(&body)
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("packages", "publish", resp.StatusCode, string(body))
			}
		case http.StatusBadGateway:
			var (
				body PublishGatewayErrorResponseBody
				err  error
			)
			err = decoder(resp).Decode(&body)
			if err != nil {
				return nil, goahttp.ErrDecodingError("packages", "publish", err)
			}
			err = ValidatePublishGatewayErrorResponseBody(&body)
			if err != nil {
				return nil, goahttp.ErrValidationError("packages", "publish", err)
			}
			return nil, NewPublishGatewayError(&body)
		default:
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("packages", "publish", resp.StatusCode, string(body))
		}
	}
}

// unmarshalPackageResponseBodyToPackagesPackage builds a value of type
// *packages.Package from a value of type *PackageResponseBody.
func unmarshalPackageResponseBodyToPackagesPackage(v *PackageResponseBody) *packages.Package {
	res := &packages.Package{
		ID:             *v.ID,
		ProjectID:      *v.ProjectID,
		OrganizationID: *v.OrganizationID,
		Name:           *v.Name,
		Title:          v.Title,
		Summary:        v.Summary,
		Description:    v.Description,
		DescriptionRaw: v.DescriptionRaw,
		URL:            v.URL,
		ImageAssetID:   v.ImageAssetID,
		LatestVersion:  v.LatestVersion,
		CreatedAt:      *v.CreatedAt,
		UpdatedAt:      *v.UpdatedAt,
		DeletedAt:      v.DeletedAt,
	}
	if v.Keywords != nil {
		res.Keywords = make([]string, len(v.Keywords))
		for i, val := range v.Keywords {
			res.Keywords[i] = val
		}
	}

	return res
}

// unmarshalPackageVersionResponseBodyToPackagesPackageVersion builds a value
// of type *packages.PackageVersion from a value of type
// *PackageVersionResponseBody.
func unmarshalPackageVersionResponseBodyToPackagesPackageVersion(v *PackageVersionResponseBody) *packages.PackageVersion {
	res := &packages.PackageVersion{
		ID:           *v.ID,
		PackageID:    *v.PackageID,
		DeploymentID: *v.DeploymentID,
		Visibility:   *v.Visibility,
		Semver:       *v.Semver,
		CreatedAt:    *v.CreatedAt,
	}

	return res
}
