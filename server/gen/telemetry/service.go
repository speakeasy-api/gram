// Code generated by goa v3.24.1, DO NOT EDIT.
//
// telemetry service
//
// Command:
// $ goa gen github.com/speakeasy-api/gram/server/design

package telemetry

import (
	"context"

	goa "goa.design/goa/v3/pkg"
	"goa.design/goa/v3/security"
)

// Fetch telemetry data for tools in Gram.
type Service interface {
	// Search and list telemetry logs that match a search filter
	SearchLogs(context.Context, *SearchLogsPayload) (res *SearchLogsResult, err error)
	// Search and list tool calls that match a search filter
	SearchToolCalls(context.Context, *SearchToolCallsPayload) (res *SearchToolCallsResult, err error)
	// Capture a telemetry event and forward it to PostHog
	CaptureEvent(context.Context, *CaptureEventPayload) (res *CaptureEventResult, err error)
}

// Auther defines the authorization functions to be implemented by the service.
type Auther interface {
	// APIKeyAuth implements the authorization logic for the APIKey security scheme.
	APIKeyAuth(ctx context.Context, key string, schema *security.APIKeyScheme) (context.Context, error)
	// JWTAuth implements the authorization logic for the JWT security scheme.
	JWTAuth(ctx context.Context, token string, schema *security.JWTScheme) (context.Context, error)
}

// APIName is the name of the API as defined in the design.
const APIName = "gram"

// APIVersion is the version of the API as defined in the design.
const APIVersion = "0.0.1"

// ServiceName is the name of the service as defined in the design. This is the
// same value that is set in the endpoint request contexts under the ServiceKey
// key.
const ServiceName = "telemetry"

// MethodNames lists the service method names as defined in the design. These
// are the same values that are set in the endpoint request contexts under the
// MethodKey key.
var MethodNames = [3]string{"searchLogs", "searchToolCalls", "captureEvent"}

// CaptureEventPayload is the payload type of the telemetry service
// captureEvent method.
type CaptureEventPayload struct {
	ApikeyToken       *string
	SessionToken      *string
	ProjectSlugInput  *string
	ChatSessionsToken *string
	// Event name
	Event string
	// Distinct ID for the user or entity (defaults to organization ID if not
	// provided)
	DistinctID *string
	// Event properties as key-value pairs
	Properties map[string]any
}

// CaptureEventResult is the result type of the telemetry service captureEvent
// method.
type CaptureEventResult struct {
	// Whether the event was successfully captured
	Success bool
}

// Filter criteria for searching logs
type SearchLogsFilter struct {
	// Trace ID filter (32 hex characters)
	TraceID *string
	// Severity level filter
	SeverityText *string
	// HTTP status code filter
	HTTPStatusCode *int32
	// HTTP route filter
	HTTPRoute *string
	// HTTP method filter
	HTTPMethod *string
	// Service name filter
	ServiceName *string
	// Gram URN filter (one or more URNs)
	GramUrns []string
	// Start time in ISO 8601 format (e.g., '2025-12-19T10:00:00Z')
	From *string
	// End time in ISO 8601 format (e.g., '2025-12-19T11:00:00Z')
	To *string
	// Deployment ID filter
	DeploymentID *string
	// Function ID filter
	FunctionID *string
	// Gram URN filter (single URN, use gram_urns for multiple)
	GramUrn *string
}

// SearchLogsPayload is the payload type of the telemetry service searchLogs
// method.
type SearchLogsPayload struct {
	ApikeyToken      *string
	SessionToken     *string
	ProjectSlugInput *string
	// Filter criteria for the search
	Filter *SearchLogsFilter
	// Cursor for pagination
	Cursor *string
	// Sort order
	Sort string
	// Number of items to return (1-1000)
	Limit int
}

// SearchLogsResult is the result type of the telemetry service searchLogs
// method.
type SearchLogsResult struct {
	// List of telemetry log records
	Logs []*TelemetryLogRecord
	// Cursor for next page
	NextCursor *string
	// Whether tool metrics are enabled for the organization
	Enabled bool
}

// Filter criteria for searching tool calls
type SearchToolCallsFilter struct {
	// Start time in ISO 8601 format (e.g., '2025-12-19T10:00:00Z')
	From *string
	// End time in ISO 8601 format (e.g., '2025-12-19T11:00:00Z')
	To *string
	// Deployment ID filter
	DeploymentID *string
	// Function ID filter
	FunctionID *string
	// Gram URN filter (single URN, use gram_urns for multiple)
	GramUrn *string
}

// SearchToolCallsPayload is the payload type of the telemetry service
// searchToolCalls method.
type SearchToolCallsPayload struct {
	ApikeyToken      *string
	SessionToken     *string
	ProjectSlugInput *string
	// Filter criteria for the search
	Filter *SearchToolCallsFilter
	// Cursor for pagination
	Cursor *string
	// Sort order
	Sort string
	// Number of items to return (1-1000)
	Limit int
}

// SearchToolCallsResult is the result type of the telemetry service
// searchToolCalls method.
type SearchToolCallsResult struct {
	// List of tool call summaries
	ToolCalls []*ToolCallSummary
	// Cursor for next page
	NextCursor *string
	// Whether tool metrics are enabled for the organization
	Enabled bool
}

// Service information
type ServiceInfo struct {
	// Service name
	Name string
	// Service version
	Version *string
}

// OpenTelemetry log record
type TelemetryLogRecord struct {
	// Log record ID
	ID string
	// Unix time in nanoseconds when event occurred
	TimeUnixNano int64
	// Unix time in nanoseconds when event was observed
	ObservedTimeUnixNano int64
	// Text representation of severity
	SeverityText *string
	// The primary log message
	Body string
	// W3C trace ID (32 hex characters)
	TraceID *string
	// W3C span ID (16 hex characters)
	SpanID *string
	// Log attributes as JSON object
	Attributes any
	// Resource attributes as JSON object
	ResourceAttributes any
	// Service information
	Service *ServiceInfo
}

// Summary information for a tool call
type ToolCallSummary struct {
	// Trace ID (32 hex characters)
	TraceID string
	// Earliest log timestamp in Unix nanoseconds
	StartTimeUnixNano int64
	// Total number of logs in this tool call
	LogCount uint64
	// HTTP status code (if applicable)
	HTTPStatusCode *int32
	// Gram URN associated with this tool call
	GramUrn string
}

// MakeUnauthorized builds a goa.ServiceError from an error.
func MakeUnauthorized(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "unauthorized", false, false, false)
}

// MakeForbidden builds a goa.ServiceError from an error.
func MakeForbidden(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "forbidden", false, false, false)
}

// MakeBadRequest builds a goa.ServiceError from an error.
func MakeBadRequest(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "bad_request", false, false, false)
}

// MakeNotFound builds a goa.ServiceError from an error.
func MakeNotFound(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "not_found", false, false, false)
}

// MakeConflict builds a goa.ServiceError from an error.
func MakeConflict(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "conflict", false, false, false)
}

// MakeUnsupportedMedia builds a goa.ServiceError from an error.
func MakeUnsupportedMedia(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "unsupported_media", false, false, false)
}

// MakeInvalid builds a goa.ServiceError from an error.
func MakeInvalid(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "invalid", false, false, false)
}

// MakeInvariantViolation builds a goa.ServiceError from an error.
func MakeInvariantViolation(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "invariant_violation", false, false, true)
}

// MakeUnexpected builds a goa.ServiceError from an error.
func MakeUnexpected(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "unexpected", false, false, true)
}

// MakeGatewayError builds a goa.ServiceError from an error.
func MakeGatewayError(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "gateway_error", false, false, true)
}
